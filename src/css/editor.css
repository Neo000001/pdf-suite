:root {
    --bg-color: #f3f4f6;
    --sidebar-width: 64px;
    --topbar-height: 60px;
    --accent: #3b82f6;
}

body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: sans-serif; overflow: hidden;
}

/* --- Layout --- */
.topbar {
    height: var(--topbar-height);
    display: flex; align-items: center; padding: 0 20px;
    background: white; border-bottom: 1px solid #ddd; gap: 15px;
}

.logo { font-weight: bold; font-size: 1.2rem; }
.logo span { color: var(--accent); }

.toolbar { display: flex; align-items: center; gap: 10px; }
.divider { width: 1px; height: 24px; background: #ddd; margin: 0 5px; }

.editor-root { display: flex; height: calc(100vh - var(--topbar-height)); }

.leftbar {
    width: var(--sidebar-width); background: white;
    border-right: 1px solid #ddd; display: flex;
    flex-direction: column; align-items: center; padding: 15px 0; gap: 12px;
}

.workspace {
    flex: 1; background: var(--bg-color);
    overflow: auto; position: relative;
}

/* --- Canvas Stack --- */
.canvas-wrapper {
    padding: 40px; display: flex; justify-content: center;
}

#canvas-inner {
    position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    background: white; transform-origin: top left;
}

#pdf-canvas { display: block; z-index: 1; }

#draw-canvas {
    position: absolute; top: 0; left: 0;
    z-index: 5; pointer-events: none; /* Managed by JS */
}

#overlay-layer {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%; z-index: 10;
    pointer-events: none; /* Managed by JS */
}

/* --- Elements --- */
.text-box {
    position: absolute; padding: 4px; min-width: 50px;
    outline: none; cursor: text; pointer-events: auto;
    word-wrap: break-word; white-space: pre-wrap;
}

.text-box.selected {
    outline: 2px dashed var(--accent);
    background: rgba(59, 130, 246, 0.05);
}

.tool-icon-btn {
    width: 42px; height: 42px; border: none; background: none;
    font-size: 1.2rem; cursor: pointer; border-radius: 8px;
}

.tool-icon-btn.active {
    background: #eff6ff; color: var(--accent);
}

.save {
    background: var(--accent); color: white;
    padding: 8px 16px; border: none; border-radius: 6px; font-weight: bold;
}

#empty-state {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%); text-align: center;
    z-index: 100;
}

#empty-state.hidden { display: none; }

#page-controls {
    position: fixed; bottom: 20px; left: 50%;
    transform: translateX(-50%); background: #333;
    color: white; padding: 5px 15px; border-radius: 20px;
    font-size: 0.8rem; z-index: 50;
}
